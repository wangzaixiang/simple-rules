# 简单原则

# 价值观
## 简单
- 复杂是自然的，简单则需要持续的创新、重构
- 重构模型，提高抽象级别，实现更好的层次化、内聚、接耦，让模型简单化。
- 使用敏捷技术（简单设计、代码重构、持续集成、单元测试、代码评审）让开发工作简单化。
- 使用Scrum项目过程，使用tapd等工具来实现需求、迭代、BUG的过程自动化管理，让流程简单化。
- 代码简单化
    - 编写DSL代码，直接切入业务逻辑，让代码简单化。
    - 使用macro来编写重复的类型代码
    - 相似的非业务逻辑，如频率控制，应该在框架层面完成。
- 使用工具来释放人的心智负担
    - 我今天有哪些任务、BUG需要处理？
    - 我的服务运行质量如何？有没有异常出现？有没有不正确的指标？
    - 花10分中修改完的代码，花多长时间可以进行测试？可以完成测试？可以发布上线？
    - 这项任务可以交给机器去自动化完成嘛，而不需要占用我每天的工作时间？
- 关于BUG
    - 不要让线上BUG过夜
    - 不要让同一个BUG重复出现，不要让同一类BUG重复出现。
    - 不要忽略线上的每一个出现的BUG，即使偶然，也一定会继续出现。
    - 不要基于猜测的未经证实的原因去修改BUG。
    - 找出深层次的原因，从源头消除BUG。
    - Fail Fast，宁可失败，不要产生垃圾和错误的数据进入到生产系统。
## 创新
## 责任
  - 服务意识
      - 站在使用者的角度来设计接口，将简单留给客户，复杂（逻辑、性能、容错、柔性）留给自己
      - 为我的客户提供清晰的文档
      - 优先为客户提供开发支持，包括培训、联调、问题定位。
      - 加强服务的监控，发现客户的潜在问题，不正确的用法
      - 接口升级时，务必要向下兼容，给予下游灵活的、充裕的时间窗口进行升级
  - 关于质量、进度
        - 仔细评估开发任务的实现方案、时间计划，在承诺时间内完成开发任务
        - 参照BUG处理原则，解决自己的每一个线上问题
        - 在项目开发过程中，要配合下游，确认自己的模块可以工作后才能离开，不能把锅甩给下游，然后自己早早离场   
  -  团队意识
      -  
## 分享

## 版本管理
  - hotfix版本应该聚焦解决1-2个问题，在当天修改、changelog评审、验证、灰度、上线。不符合这个原则的不要作为hotfix。
  - hotfix 应该快速响应，不要合并，根据需要可以一天多发给几个Hotfix。
    
## 升级策略
  - 版本升级时的DB升级，必须是向下兼容的（保障现有版本可正常运行），并先验证后再升软件版本。
    - 如果上述条件不满足，则先对当前版本进行兼容性升级，以确保Schema的变更是向下兼容的。
    - 不要使用 insert into table values( a, b, c, d ）等语法
    - 服务升级从设计上要考虑向下兼容性，不要强迫所有客户端同步升级版本。
    - 服务升级需要提交灰度计划，评估风险，范围、验证方式，按照计划进行灰度升级，并有回滚方案。
    - 灰度升级应该尽可能在工作时间进行，保持清醒、监控。

## 运维
    - 部署自动化
    - 监控告警
        - 服务异常一定要清零。
        - 告警分级，区别对待。不要让低级别的告警淹没了严重的告警 
        - 重要的告警必须 7*24 小时立即响应
    - 业务健康监控
        - 所有导致系统不能正常访问的问题，应该添加业务健康监控，并发出告警。   

## 沟通、反馈
- 一分钟目标：领导者需要将目标浓缩在1分钟内，并且让员工复述目标，明确任务执行的汇报和反馈机制。